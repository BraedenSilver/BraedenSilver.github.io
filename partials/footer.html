<!-- Shared site footer with share links; loaded via js/site.js -->
<footer>
  <div class="footer-bar">
    <p class="last-updated">Last updated: <span id="last-updated"></span></p>

    <div id="share-block">
      <span>Share:</span>
      <a class="share-link twitter"   href="https://twitter.com/intent/tweet?text=Check+this+out&url=" target="_blank">Twitter/X</a> ·
      <a class="share-link reddit"    href="https://www.reddit.com/submit?url=" target="_blank">Reddit</a> ·
      <a class="share-link hn"        href="https://news.ycombinator.com/submitlink?u=" target="_blank">Hacker News</a> ·
      <a class="share-link facebook"  href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank">Facebook</a> ·
      <a class="share-link linkedin"  href="https://www.linkedin.com/sharing/share-offsite/?url=" target="_blank">LinkedIn</a> ·
      <a class="share-link whatsapp"  href="https://api.whatsapp.com/send?text=" target="_blank">WhatsApp</a> ·
      <a class="share-link email"     href="mailto:?subject=Check this out&body=">Email</a>
    </div>

    <div class="kilroy-peek footer-eyes">
      <div class="head">
        <div class="eye left"><div class="pupil"></div></div>
        <div class="eye right"><div class="pupil"></div></div>
      </div>
    </div>
  </div>

  <!-- Historia-only citation block -->
  <div id="citation-block">
    <h3>Citation</h3>
    <blockquote id="site-citation">
      Silver, B. (2025). <em>Historia Dinosauralis</em>. Retrieved from: <span id="cite-url"></span>
    </blockquote>
    <small><em>Please don’t actually cite this in your research.</em></small>
  </div>
</footer>

<style>
  .footer-bar {
    position: fixed;
    bottom: 0;
    right: 0;
    display: flex;
    align-items: flex-end;
    gap: 1rem;
    background: #fff;
    padding: 0.5rem;
    left: 0; /* full width */
    border-top: 2px solid #000; /* “wall” line */
    flex-wrap: wrap;
  }

  .footer-bar p,
  .footer-bar #share-block {
    margin: 0;
  }

  #share-block {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.25rem;
  }
  #share-block span { margin-right: 0.25rem; }

  @media (max-width: 600px) {
    .footer-bar {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    #share-block {
      justify-content: center;
    }
  }

  /* Kilroy peeker on the right end of the bar */
  .kilroy-peek {
    position: relative;
    width: 160px;
    height: 0;
    border-top: 2px solid #000; /* internal line so the head “peeks” */
  }
  .kilroy-peek .head {
    position: absolute;
    top: -56px;
    right: 0;
    width: 120px;
    height: 60px;
    border: 2px solid #000;
    border-bottom: none;
    border-radius: 60px 60px 0 0;
    background: #fff;
  }

  .footer-eyes .eye {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid #000;
    position: absolute;
    overflow: hidden;
  }
  .footer-eyes .eye.left  { left: 24px;  top: 16px; }
  .footer-eyes .eye.right { right: 24px; top: 16px; }

  .footer-eyes .pupil {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #000;
    position: absolute;
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    transition: transform 60ms linear;
  }

  @media (prefers-reduced-motion: reduce) {
    .footer-eyes .pupil { transition: none; }
  }
</style>

<script>
/* Eye tracking for the footer peeker */
(() => {
  const eyes = document.querySelectorAll('.footer-eyes .eye');
  if (!eyes.length) return;

  const move = (x, y) => {
    eyes.forEach(eye => {
      const pupil = eye.querySelector('.pupil');
      if (!pupil) return;

      const r = eye.getBoundingClientRect();
      const cx = r.left + r.width / 2;
      const cy = r.top + r.height / 2;
      const dx = x - cx;
      const dy = y - cy;

      const angle = Math.atan2(dy, dx);
      const radius = Math.min(r.width, r.height) * 0.25; // travel range
      const px = Math.cos(angle) * radius;
      const py = Math.sin(angle) * radius;

      pupil.style.transform = `translate(calc(-50% + ${px}px), calc(-50% + ${py}px))`;
    });
  };

  const center = () => {
    document.querySelectorAll('.footer-eyes .pupil')
      .forEach(p => p.style.transform = 'translate(-50%, -50%)');
  };

  window.addEventListener('pointermove', e => move(e.clientX, e.clientY), { passive: true });
  window.addEventListener('mouseleave', center, { passive: true });
  window.addEventListener('blur', center, { passive: true });
})();
</script>
