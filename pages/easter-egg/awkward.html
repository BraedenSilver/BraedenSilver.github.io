<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Oops, This Is Awkward — Braeden Silver</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="We couldn't find something to show you, so enjoy the Kilroys instead."
    />
    <meta property="og:title" content="Oops, This Is Awkward — Braeden Silver" />
    <meta
      property="og:description"
      content="A surprise page full of colorful Kilroys when the randomizer runs out of ideas."
    />
    <link rel="stylesheet" href="/assets/site.css" />
  </head>
  <body class="awkward-page" data-section="awkward">
    <div id="site-header">
      <noscript>
        <div class="noscript-banner" role="alert">
          JavaScript powers the interactive parts of this site. Please enable it
          to explore everything on BraedenSilver.com.
          <a href="/pages/help/enable-javascript/index.html">
            Learn how to turn on JavaScript.
          </a>
        </div>
      </noscript>
    </div>

    <main id="main-content">
      <nav class="page-back" aria-label="Back navigation">
        <a class="project-entry back-link" href="/index.html">
          <span class="back-link-icon" aria-hidden="true">←</span>
          <span class="back-link-label">Take me back home</span>
        </a>
      </nav>
      <h1>Oops, this is awkward.</h1>
      <p class="awkward-page__lead">
        Welcome to the Kilroy crew.
      </p>
      <div class="awkward-page__actions">
        <a href="/pages/blog/index.html">Browse the full blog</a>
        <a href="/pages/projects/index.html">Explore every project</a>
        <a href="/pages/research/index.html">Inspect all research notes</a>
      </div>
      <div
        class="awkward-killroy-field"
        id="awkward-killroy-field"
        aria-hidden="true"
      ></div>
    </main>

    <div id="site-footer">
      <noscript>
        <div class="noscript-banner" role="alert">
          JavaScript powers the interactive parts of this site. Please enable it
          to explore everything on BraedenSilver.com.
          <a href="/pages/help/enable-javascript/index.html">
            Learn how to turn on JavaScript.
          </a>
        </div>
      </noscript>
    </div>

    <script src="/js/site.js" defer></script>
    <script>
      (function () {
        const field = document.getElementById("awkward-killroy-field");
        if (!field) {
          return;
        }
        const total = 10;
        const RARE_THIRD_EYE_CHANCE = 1 / 100;
        const fragment = document.createDocumentFragment();
        for (let i = 0; i < total; i += 1) {
          const el = document.createElement("div");
          const hasOracleEye = Math.random() < RARE_THIRD_EYE_CHANCE;
          el.className = `awkward-killroy footer-eyes${
            hasOracleEye ? " awkward-killroy--oracle" : ""
          }`;
          const headParts = [
            '<div class="awkward-killroy__head">',
            '  <div class="eye left"><div class="pupil"></div></div>',
            '  <div class="eye right"><div class="pupil"></div></div>',
          ];
          if (hasOracleEye) {
            headParts.push(
              '  <div class="eye third"><div class="pupil"></div></div>',
            );
          }
          headParts.push("</div>");
          el.innerHTML = headParts.join("");
          fragment.appendChild(el);
        }
        field.appendChild(fragment);

        function randomInRange(min, max) {
          return Math.random() * (max - min) + min;
        }

        function toHsl(hue, saturation, lightness) {
          return `hsl(${Math.round(hue)}deg ${saturation.toFixed(1)}% ${lightness.toFixed(1)}%)`;
        }

        const isCompactViewport =
          typeof window.matchMedia === "function"
            ? window.matchMedia("(max-width: 600px)").matches
            : false;

        requestAnimationFrame(() => {
          const fieldRect = field.getBoundingClientRect();
          const fieldWidth = Math.max(fieldRect.width, 1);
          const fieldHeight = Math.max(fieldRect.height, 1);
          const placements = [];
          const boundaryPadding = Math.max(
            12,
            Math.min(32, Math.min(fieldWidth, fieldHeight) * 0.08)
          );

          function findPosition(radius, spacing) {
            const minX = radius + boundaryPadding;
            const maxX = fieldWidth - radius - boundaryPadding;
            const minY = radius + boundaryPadding;
            const maxY = fieldHeight - radius - boundaryPadding;

            if (minX >= maxX || minY >= maxY) {
              return null;
            }

            const maxAttempts = 80;
            for (let attempt = 0; attempt < maxAttempts; attempt += 1) {
              const candidateX = randomInRange(minX, maxX);
              const candidateY = randomInRange(minY, maxY);

              const hasOverlap = placements.some((placed) => {
                const dx = placed.x - candidateX;
                const dy = placed.y - candidateY;
                const distance = Math.hypot(dx, dy);
                return distance < placed.radius + radius + spacing;
              });

              if (!hasOverlap) {
                return { x: candidateX, y: candidateY };
              }
            }

            return null;
          }

          const spacings = [28, 24, 20, 16, 12, 8];
          const FOOTER_PUPIL_RATIO = 12 / 28;

          field.querySelectorAll(".awkward-killroy").forEach((el) => {
            el.style.removeProperty("--awkward-border");
            el.style.removeProperty("--awkward-shadow");
            el.style.removeProperty("--awkward-pupil");
            el.style.removeProperty("--pupil-size");

            const hue = randomInRange(0, 360);
            const saturation = randomInRange(62, 88);
            const lightness = randomInRange(56, 78);

            const minSize = isCompactViewport ? 102 : 120;
            const maxSize = isCompactViewport ? 148 : 176;
            const maxDimension = Math.max(
              0,
              Math.min(fieldWidth, fieldHeight) - boundaryPadding * 2
            );
            const sizeUpperBound =
              maxDimension > 0
                ? Math.max(minSize, Math.min(maxSize, maxDimension))
                : minSize;
            const initialLowerBound = Math.min(minSize, sizeUpperBound);
            let size = randomInRange(initialLowerBound, sizeUpperBound);
            const rotate = randomInRange(-7, 7);
            const eyeOffsetFactor = randomInRange(0.19, 0.22);
            const eyeTopFactor = randomInRange(0.32, 0.36);
            const eyeSizeFactor = randomInRange(0.22, 0.25);

            const absoluteMinSize = Math.min(
              sizeUpperBound,
              Math.max(72, minSize * 0.75)
            );

            const radius = () => size / 2;
            let position = null;

            for (const spacing of spacings) {
              position = findPosition(radius(), spacing);
              if (position) {
                break;
              }
              if (size > absoluteMinSize) {
                size = Math.max(absoluteMinSize, size * 0.92);
              }
            }

            if (!position) {
              position = findPosition(radius(), 0);
            }

            if (!position && size > absoluteMinSize) {
              size = absoluteMinSize;
              position = findPosition(radius(), 0);
            }

            if (!position) {
              position = { x: fieldWidth / 2, y: fieldHeight / 2 };
            }

            const finalSize = size;
            const eyeOffset = Math.round(finalSize * eyeOffsetFactor);
            const eyeTop = Math.round(finalSize * eyeTopFactor);
            const eyeSize = Math.round(finalSize * eyeSizeFactor);
            const pupilSize = Math.round(eyeSize * FOOTER_PUPIL_RATIO);
            const outlineWidth = 2.5;
            const shadowOffset = Math.min(8, Math.max(4, Math.round(finalSize * 0.035)));

            const finalRadius = finalSize / 2;
            placements.push({ x: position.x, y: position.y, radius: finalRadius });

            const xPercent = (position.x / fieldWidth) * 100;
            const yPercent = (position.y / fieldHeight) * 100;

            el.style.setProperty("--awkward-skin", toHsl(hue, saturation, lightness));
            el.style.setProperty("--awkward-sclera", "#fff");
            el.style.setProperty("--killroy-x", `${xPercent.toFixed(2)}%`);
            el.style.setProperty("--killroy-y", `${yPercent.toFixed(2)}%`);
            el.style.setProperty("--killroy-rotate", `${rotate.toFixed(1)}deg`);
            el.style.setProperty("--awkward-size", `${finalSize.toFixed(0)}px`);
            el.style.setProperty("--eye-offset", `${eyeOffset}px`);
            el.style.setProperty("--eye-top", `${eyeTop}px`);
            el.style.setProperty("--eye-size", `${eyeSize}px`);
            el.style.setProperty("--pupil-size", `${pupilSize}px`);
            el.style.setProperty("--eye-border", `${outlineWidth}px`);
            el.style.setProperty("--awkward-border-width", `${outlineWidth}px`);
            el.style.setProperty("--awkward-shadow-offset", `${shadowOffset}px`);

            if (el.classList.contains("awkward-killroy--oracle")) {
              const thirdEye = el.querySelector(".eye.third");
              if (thirdEye) {
                const thirdEyeSizeFactor = randomInRange(0.16, 0.2);
                const thirdEyeSize = Math.round(finalSize * thirdEyeSizeFactor);
                const thirdEyeVerticalOffset = Math.round(
                  thirdEyeSize * randomInRange(0.55, 0.68),
                );
                const thirdEyeTop = Math.max(
                  outlineWidth * 2,
                  eyeTop - thirdEyeVerticalOffset,
                );
                const thirdEyePupilSize = Math.round(
                  thirdEyeSize * FOOTER_PUPIL_RATIO,
                );
                thirdEye.style.setProperty("--eye-size", `${thirdEyeSize}px`);
                thirdEye.style.setProperty("--eye-top", `${thirdEyeTop}px`);
                thirdEye.style.setProperty(
                  "--pupil-size",
                  `${thirdEyePupilSize}px`,
                );
              }
            }
          });
        });
      })();
    </script>
  </body>
</html>
